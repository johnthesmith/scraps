# 23:59:59

Регулярно сталкиваюсь с банальной проблемой. При определении временниого 
интервала, завершающегося концом суток, разработачики упорно используют значение 
`23:59:59`.

Я бы не стал тратить время на разбор этой ситуации, если бы не 
сталкивался с ней из проекта в проект с удивительной регулярностью.

> @igptx и @*8888 меня поймут :)



# Суть

Ретроспективно в git я наблюдал как проекты приходят к проблеме.

Разработчик реализует небольшой журнал и использует `int` или `string` для 
хранения времени. При этом, последним возможным временем в стуках действительно 
остается `23:59:59`. Выборку разработчик реализует закрытым интервалом по условию:

`from >= record <= to`.

Со временем легаси обрастает функционалом, а таблицы прибавляют 
мощности. Требуется повысить точность момента врмени.

Разработчики приходят к мысли, что для экономии места и повышения 
производительности следует перейти на `datetime`. 

И вот записи в последней секунде `2026-12-12 23:59:59.555` остаются
ни у дел, так как не попадат ни в свои сутки `до 2026-12-12 23:59:59` 
ни в следующие `c 2026-12-13 00:00:00`.

Про оставшийся интервал в 1 секунду никто не вспоминает.



# Пример

Имеем форму:

```
Укажите период запроса:
Начало      [ 2026-12-12 00:00:00 ]
Завершение  [ 2026-12-12 23:59:59 ]
```

При этом подразумевается, что запрос будет выполнен за 24 часа и все записи за 
соответсвующий интервал времени окажутся в выборке.

Однако, это не соответствует действительности. Такой подход может срабоать 
только в том случае, если за `2026-12-12 23:59:59` до момента 
`2026-12-13 00:00:00` гарантированно нет событий, однако за частую это не 
соответвует истине. При указании времени `23:59:59` в выборку не попадет 
последняя секунда.

```
        <--------------ожидаемый интервал запроса------------>
        <----- полученный интервал --->
                                       <----- потеряшка ------>

        2026-12-12                                 :(         2026-12-13
--------|-----A----- ~ ------B---------|-----------С----------|----------> t
        00:00:00                       23:59:59               00:00:00
``` 

В результате вместо кортежа [ A, B, C ], пользователь получает [ A, B ]. Самое 
неприятное, что пользователь уверен в правильности аргументов и результата, а 
проблема обнаруживается существенно позже.



# Что делать

1. Используйте `datetime` вместо `int` или `string`.
2. Используйте полуоткрытый интервал `[from, to)` вида `from >= moment < to`.
3. Облегчайте пользователю интерфейс, сделав время опциональным для значений `00:00:00`.

